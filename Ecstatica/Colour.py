# coding: utf-8

#Created on 21.04.2012

#Copyright (C) 2013 Fabian Hachenberg
#This file is part of EcstaticaLib. 
#EcstaticaLib is free software: you can redistribute it and/or modify 
#it under the terms of the GNU General Public License as published by 
#the Free Software Foundation, either version 3 of the License, or 
#(at your option) any later version. 
#More information about the license is provided in the LICENSE file.

'''this is the globally used palette in ecstatica. It is loaded from title_s.raw at the beginning of the game and never changed afterwards!'''
Palette = [ (0, 0, 0), (255, 255, 255), (255, 0, 0), (255, 255, 0), (79, 79, 79), (143, 143, 143), (0, 0, 191), (127, 191, 255), (243, 243, 243), 
            (255, 255, 255), (255, 255, 255), (255, 255, 255), (255, 255, 255), (255, 255, 255), (255, 255, 255), (255, 255, 255), (51, 19, 11), 
            (55, 19, 11), (63, 23, 11), (67, 23, 11), (75, 27, 15), (79, 27, 15), (87, 31, 15), (91, 31, 15), (99, 35, 19), (103, 35, 19), 
            (111, 39, 19), (115, 39, 19), (123, 43, 23), (127, 43, 23), (135, 47, 23), (139, 47, 23), (31, 15, 0), (39, 19, 0), (51, 23, 0), 
            (59, 31, 0), (71, 35, 0), (79, 39, 7), (91, 47, 7), (99, 51, 7), (111, 55, 11), (119, 63, 15), (131, 67, 19), (139, 75, 23), 
            (151, 79, 27), (159, 87, 31), (171, 91, 35), (179, 99, 39), (191, 107, 47), (195, 115, 51), (199, 123, 59), (203, 131, 63), 
            (207, 139, 71), (211, 147, 79), (215, 155, 83), (219, 163, 91), (223, 171, 99), (227, 179, 107), (231, 187, 115), (235, 195, 123), 
            (239, 203, 131), (243, 211, 139), (251, 219, 151), (255, 227, 159), (0, 31, 0), (0, 35, 0), (0, 43, 0), (0, 51, 0), (0, 59, 0), 
            (0, 67, 0), (0, 71, 0), (0, 79, 0), (0, 87, 0), (0, 95, 0), (0, 103, 0), (0, 111, 0), (0, 115, 0), (0, 123, 0), (0, 131, 0), 
            (0, 139, 0), (0, 147, 0), (7, 151, 7), (15, 159, 15), (23, 167, 23), (31, 175, 31), (43, 183, 43), (55, 187, 55), (67, 195, 67), 
            (79, 203, 79), (91, 211, 91), (103, 219, 103), (119, 223, 119), (135, 231, 135), (151, 239, 151), (167, 247, 167), (187, 255, 187), 
            (15, 15, 15), (23, 23, 23), (27, 27, 27), (35, 35, 35), (43, 43, 43), (51, 51, 51), (59, 59, 59), (67, 67, 67), (75, 75, 75), 
            (83, 83, 83), (91, 91, 91), (99, 99, 99), (107, 107, 107), (115, 115, 115), (123, 123, 123), (131, 131, 131), (139, 139, 139), 
            (147, 147, 147), (151, 151, 151), (159, 159, 159), (167, 167, 167), (175, 175, 175), (183, 183, 183), (191, 191, 191), (199, 199, 199), 
            (207, 207, 207), (215, 215, 215), (223, 223, 223), (231, 231, 231), (239, 239, 239), (247, 247, 247), (255, 255, 255), (0, 0, 31), 
            (0, 0, 35), (0, 0, 43), (0, 0, 51), (0, 0, 59), (0, 0, 67), (0, 0, 75), (0, 0, 79), (0, 0, 87), (0, 0, 95), (0, 0, 103), (0, 0, 111), 
            (0, 0, 115), (0, 0, 123), (0, 0, 131), (0, 0, 139), (0, 0, 147), (7, 7, 151), (15, 15, 159), (23, 23, 167), (31, 31, 175), 
            (43, 43, 183), (55, 55, 187), (67, 67, 195), (79, 79, 203), (91, 91, 211), (103, 103, 219), (119, 119, 223), (135, 135, 231), 
            (151, 151, 239), (167, 167, 247), (187, 187, 255), (23, 23, 0), (27, 27, 0), (35, 35, 0), (43, 43, 0), (51, 51, 0), (59, 59, 0), 
            (67, 67, 0), (75, 75, 0), (83, 83, 0), (87, 87, 0), (95, 95, 0), (103, 103, 0), (111, 111, 0), (119, 119, 0), (127, 127, 0), 
            (135, 135, 0), (143, 143, 0), (147, 147, 0), (155, 155, 7), (163, 163, 11), (171, 171, 15), (179, 179, 19), (187, 187, 27), 
            (195, 195, 31), (203, 203, 39), (207, 207, 47), (215, 215, 51), (223, 223, 59), (231, 231, 67), (239, 239, 75), (247, 247, 87), 
            (255, 255, 95), (31, 0, 0), (35, 0, 0), (43, 0, 0), (51, 0, 0), (59, 0, 0), (67, 0, 0), (71, 0, 0), (79, 0, 0), (87, 0, 0), (95, 0, 0), 
            (103, 0, 0), (111, 0, 0), (115, 0, 0), (123, 0, 0), (131, 0, 0), (139, 0, 0), (147, 0, 0), (151, 0, 0), (159, 7, 7), (167, 11, 11), 
            (175, 15, 15), (183, 19, 19), (187, 27, 27), (195, 31, 31), (203, 35, 35), (211, 43, 43), (219, 51, 51), (223, 55, 55), (231, 67, 67), 
            (239, 75, 75), (247, 83, 83), (255, 91, 91), (23, 0, 23), (27, 0, 27), (35, 0, 35), (43, 0, 43), (51, 0, 51), (59, 0, 59), (67, 0, 67), 
            (75, 7, 75), (83, 7, 83), (87, 7, 87), (95, 7, 95), (103, 11, 103), (111, 11, 111), (119, 15, 119), (127, 15, 127), (135, 19, 135), 
            (143, 23, 143), (147, 27, 147), (155, 35, 155), (163, 43, 163), (171, 55, 171), (179, 63, 179), (187, 71, 187), (195, 83, 195), 
            (203, 95, 203), (207, 103, 207), (215, 119, 215), (223, 131, 223), (231, 143, 231), (239, 155, 239), (247, 171, 247), (255, 187, 255)]

MapPalettes =[[15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 30, 30, 30, 30, 30, 30, 30, 30, 31, 31, 31, 31, 31, 31], 
              [32, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 35, 35, 35, 36, 36, 36, 36, 36, 36, 36, 36, 37, 37, 37, 37, 37, 37, 37, 37, 38, 38, 38, 38, 38, 38, 38, 38, 39, 39, 39, 39, 39, 39, 39, 39, 40, 40, 40, 40, 40, 40, 40, 40, 41, 41, 41, 41, 41, 41, 41, 41, 42, 42, 42, 42, 42, 42, 42, 42, 43, 43, 43, 43, 43, 43,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],#todo: here is added zeros. The method below seems to be not working completely correct yet! 
              [35, 35, 36, 36, 36, 36, 36, 36, 36, 36, 37, 37, 37, 37, 37, 37, 37, 37, 38, 38, 38, 38, 38, 38, 38, 38, 39, 39, 39, 39, 39, 39, 39, 39, 40, 40, 40, 40, 40, 40, 40, 40, 41, 41, 41, 41, 41, 41, 41, 41, 42, 42, 42, 42, 42, 42, 42, 42, 43, 43, 43, 43, 43, 43, 43, 43, 44, 44, 44, 44, 44, 44, 44, 44, 45, 45, 45, 45, 45, 45, 45, 45, 46, 46, 46, 46, 46, 46, 46, 46, 47, 47, 47, 47, 47, 47, 47, 47, 48, 48, 48, 48, 48, 48, 48, 48, 49, 49, 49, 49, 49, 49, 49, 49, 50, 50, 50, 50, 50, 50, 50, 50, 51, 51, 51, 51, 51, 51], 
              [47, 47, 48, 48, 48, 48, 48, 48, 48, 48, 49, 49, 49, 49, 49, 49, 49, 49, 50, 50, 50, 50, 50, 50, 50, 50, 51, 51, 51, 51, 51, 51, 51, 51, 52, 52, 52, 52, 52, 52, 52, 52, 53, 53, 53, 53, 53, 53, 53, 53, 54, 54, 54, 54, 54, 54, 54, 54, 55, 55, 55, 55, 55, 55, 55, 55, 56, 56, 56, 56, 56, 56, 56, 56, 57, 57, 57, 57, 57, 57, 57, 57, 58, 58, 58, 58, 58, 58, 58, 58, 59, 59, 59, 59, 59, 59, 59, 59, 60, 60, 60, 60, 60, 60, 60, 60, 61, 61, 61, 61, 61, 61, 61, 61, 62, 62, 62, 62, 62, 62, 62, 62, 63, 63, 63, 63, 63, 63], 
              [67, 67, 68, 68, 68, 68, 68, 68, 68, 68, 69, 69, 69, 69, 69, 69, 69, 69, 70, 70, 70, 70, 70, 70, 70, 70, 71, 71, 71, 71, 71, 71, 71, 71, 72, 72, 72, 72, 72, 72, 72, 72, 73, 73, 73, 73, 73, 73, 73, 73, 74, 74, 74, 74, 74, 74, 74, 74, 75, 75, 75, 75, 75, 75, 75, 75, 76, 76, 76, 76, 76, 76, 76, 76, 77, 77, 77, 77, 77, 77, 77, 77, 78, 78, 78, 78, 78, 78, 78, 78, 79, 79, 79, 79, 79, 79, 79, 79, 80, 80, 80, 80, 80, 80, 80, 80, 81, 81, 81, 81, 81, 81, 81, 81, 82, 82, 82, 82, 82, 82, 82, 82, 83, 83, 83, 83, 83, 83], 
              [79, 79, 80, 80, 80, 80, 80, 80, 80, 80, 81, 81, 81, 81, 81, 81, 81, 81, 82, 82, 82, 82, 82, 82, 82, 82, 83, 83, 83, 83, 83, 83, 83, 83, 84, 84, 84, 84, 84, 84, 84, 84, 85, 85, 85, 85, 85, 85, 85, 85, 86, 86, 86, 86, 86, 86, 86, 86, 87, 87, 87, 87, 87, 87, 87, 87, 88, 88, 88, 88, 88, 88, 88, 88, 89, 89, 89, 89, 89, 89, 89, 89, 90, 90, 90, 90, 90, 90, 90, 90, 91, 91, 91, 91, 91, 91, 91, 91, 92, 92, 92, 92, 92, 92, 92, 92, 93, 93, 93, 93, 93, 93, 93, 93, 94, 94, 94, 94, 94, 94, 94, 94, 95, 95, 95, 95, 95, 95], 
              [ 99,  99, 100, 100, 100, 100, 100, 100, 100, 100, 101, 101, 101, 101, 101, 101, 101, 101, 102, 102, 102, 102, 102, 102, 102, 102, 103, 103, 103, 103, 103, 103, 103, 103, 104, 104, 104, 104, 104, 104, 104, 104, 105, 105, 105, 105, 105, 105, 105, 105, 106, 106, 106, 106, 106, 106, 106, 106, 107, 107, 107, 107, 107, 107, 107, 107, 108, 108, 108, 108, 108, 108, 108, 108, 109, 109, 109, 109, 109, 109, 109, 109, 110, 110, 110, 110, 110, 110, 110, 110, 111, 111, 111, 111, 111, 111, 111, 111, 112, 112, 112, 112, 112, 112, 112, 112, 113, 113, 113, 113, 113, 113, 113, 113, 114, 114, 114, 114, 114, 114, 114, 114, 115, 115, 115, 115, 115, 115], 
              [111, 111, 112, 112, 112, 112, 112, 112, 112, 112, 113, 113, 113, 113, 113, 113, 113, 113, 114, 114, 114, 114, 114, 114, 114, 114, 115, 115, 115, 115, 115, 115, 115, 115, 116, 116, 116, 116, 116, 116, 116, 116, 117, 117, 117, 117, 117, 117, 117, 117, 118, 118, 118, 118, 118, 118, 118, 118, 119, 119, 119, 119, 119, 119, 119, 119, 120, 120, 120, 120, 120, 120, 120, 120, 121, 121, 121, 121, 121, 121, 121, 121, 122, 122, 122, 122, 122, 122, 122, 122, 123, 123, 123, 123, 123, 123, 123, 123, 124, 124, 124, 124, 124, 124, 124, 124, 125, 125, 125, 125, 125, 125, 125, 125, 126, 126, 126, 126, 126, 126, 126, 126, 127, 127, 127, 127, 127, 127], 
              [131, 131, 132, 132, 132, 132, 132, 132, 132, 132, 133, 133, 133, 133, 133, 133, 133, 133, 134, 134, 134, 134, 134, 134, 134, 134, 135, 135, 135, 135, 135, 135, 135, 135, 136, 136, 136, 136, 136, 136, 136, 136, 137, 137, 137, 137, 137, 137, 137, 137, 138, 138, 138, 138, 138, 138, 138, 138, 139, 139, 139, 139, 139, 139, 139, 139, 140, 140, 140, 140, 140, 140, 140, 140, 141, 141, 141, 141, 141, 141, 141, 141, 142, 142, 142, 142, 142, 142, 142, 142, 143, 143, 143, 143, 143, 143, 143, 143, 144, 144, 144, 144, 144, 144, 144, 144, 145, 145, 145, 145, 145, 145, 145, 145, 146, 146, 146, 146, 146, 146, 146, 146, 147, 147, 147, 147, 147, 147], 
              [143, 143, 144, 144, 144, 144, 144, 144, 144, 144, 145, 145, 145, 145, 145, 145, 145, 145, 146, 146, 146, 146, 146, 146, 146, 146, 147, 147, 147, 147, 147, 147, 147, 147, 148, 148, 148, 148, 148, 148, 148, 148, 149, 149, 149, 149, 149, 149, 149, 149, 150, 150, 150, 150, 150, 150, 150, 150, 151, 151, 151, 151, 151, 151, 151, 151, 152, 152, 152, 152, 152, 152, 152, 152, 153, 153, 153, 153, 153, 153, 153, 153, 154, 154, 154, 154, 154, 154, 154, 154, 155, 155, 155, 155, 155, 155, 155, 155, 156, 156, 156, 156, 156, 156, 156, 156, 157, 157, 157, 157, 157, 157, 157, 157, 158, 158, 158, 158, 158, 158, 158, 158, 159, 159, 159, 159, 159, 159], 
              [163, 163, 164, 164, 164, 164, 164, 164, 164, 164, 165, 165, 165, 165, 165, 165, 165, 165, 166, 166, 166, 166, 166, 166, 166, 166, 167, 167, 167, 167, 167, 167, 167, 167, 168, 168, 168, 168, 168, 168, 168, 168, 169, 169, 169, 169, 169, 169, 169, 169, 170, 170, 170, 170, 170, 170, 170, 170, 171, 171, 171, 171, 171, 171, 171, 171, 172, 172, 172, 172, 172, 172, 172, 172, 173, 173, 173, 173, 173, 173, 173, 173, 174, 174, 174, 174, 174, 174, 174, 174, 175, 175, 175, 175, 175, 175, 175, 175, 176, 176, 176, 176, 176, 176, 176, 176, 177, 177, 177, 177, 177, 177, 177, 177, 178, 178, 178, 178, 178, 178, 178, 178, 179, 179, 179, 179, 179, 179], 
              [175, 175, 176, 176, 176, 176, 176, 176, 176, 176, 177, 177, 177, 177, 177, 177, 177, 177, 178, 178, 178, 178, 178, 178, 178, 178, 179, 179, 179, 179, 179, 179, 179, 179, 180, 180, 180, 180, 180, 180, 180, 180, 181, 181, 181, 181, 181, 181, 181, 181, 182, 182, 182, 182, 182, 182, 182, 182, 183, 183, 183, 183, 183, 183, 183, 183, 184, 184, 184, 184, 184, 184, 184, 184, 185, 185, 185, 185, 185, 185, 185, 185, 186, 186, 186, 186, 186, 186, 186, 186, 187, 187, 187, 187, 187, 187, 187, 187, 188, 188, 188, 188, 188, 188, 188, 188, 189, 189, 189, 189, 189, 189, 189, 189, 190, 190, 190, 190, 190, 190, 190, 190, 191, 191, 191, 191, 191, 191], 
              [195, 195, 196, 196, 196, 196, 196, 196, 196, 196, 197, 197, 197, 197, 197, 197, 197, 197, 198, 198, 198, 198, 198, 198, 198, 198, 199, 199, 199, 199, 199, 199, 199, 199, 200, 200, 200, 200, 200, 200, 200, 200, 201, 201, 201, 201, 201, 201, 201, 201, 202, 202, 202, 202, 202, 202, 202, 202, 203, 203, 203, 203, 203, 203, 203, 203, 204, 204, 204, 204, 204, 204, 204, 204, 205, 205, 205, 205, 205, 205, 205, 205, 206, 206, 206, 206, 206, 206, 206, 206, 207, 207, 207, 207, 207, 207, 207, 207, 208, 208, 208, 208, 208, 208, 208, 208, 209, 209, 209, 209, 209, 209, 209, 209, 210, 210, 210, 210, 210, 210, 210, 210, 211, 211, 211, 211, 211, 211], 
              [207, 207, 208, 208, 208, 208, 208, 208, 208, 208, 209, 209, 209, 209, 209, 209, 209, 209, 210, 210, 210, 210, 210, 210, 210, 210, 211, 211, 211, 211, 211, 211, 211, 211, 212, 212, 212, 212, 212, 212, 212, 212, 213, 213, 213, 213, 213, 213, 213, 213, 214, 214, 214, 214, 214, 214, 214, 214, 215, 215, 215, 215, 215, 215, 215, 215, 216, 216, 216, 216, 216, 216, 216, 216, 217, 217, 217, 217, 217, 217, 217, 217, 218, 218, 218, 218, 218, 218, 218, 218, 219, 219, 219, 219, 219, 219, 219, 219, 220, 220, 220, 220, 220, 220, 220, 220, 221, 221, 221, 221, 221, 221, 221, 221, 222, 222, 222, 222, 222, 222, 222, 222, 223, 223, 223, 223, 223, 223], 
              [227, 227, 228, 228, 228, 228, 228, 228, 228, 228, 229, 229, 229, 229, 229, 229, 229, 229, 230, 230, 230, 230, 230, 230, 230, 230, 231, 231, 231, 231, 231, 231, 231, 231, 232, 232, 232, 232, 232, 232, 232, 232, 233, 233, 233, 233, 233, 233, 233, 233, 234, 234, 234, 234, 234, 234, 234, 234, 235, 235, 235, 235, 235, 235, 235, 235, 236, 236, 236, 236, 236, 236, 236, 236, 237, 237, 237, 237, 237, 237, 237, 237, 238, 238, 238, 238, 238, 238, 238, 238, 239, 239, 239, 239, 239, 239, 239, 239, 240, 240, 240, 240, 240, 240, 240, 240, 241, 241, 241, 241, 241, 241, 241, 241, 242, 242, 242, 242, 242, 242, 242, 242, 243, 243, 243, 243, 243, 243], 
              [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]

def initMapPalettes():
    '''
    (was used to create the MapPalettes array)
    
    Creates 15 MapPalettes. What is a MapPalette? In Ecstatica, there's a central data source: the ellipse lightness map. This is a 128*128 2d 
    map mapping each (x,y)-Coordinate to a lightness value in [0,127]. These lightness values are now used to get a specific entry from one of the
    15 MapPalettes. Each MapPalette contains 128 entries mapping (therefore the name) lightness-values to video card palette entries.
    '''
    
    palettes = []
    
    #follows code at 12083
    
    for counter in range(16):
        palette = []
        if counter == 0:
            edi = 0
            ebx = 0
        elif counter == 1:
            edi = 1
            ebx = 2
        elif counter == 2:
            edi = 1
            ebx = 1
        elif counter == 3:
            edi = 1
            ebx = 0
        elif counter == 4:
            edi = 2
            ebx = 1
        elif counter == 5:
            edi = 2
            ebx = 0
        elif counter == 6:
            edi = 3
            ebx = 1
        elif counter == 7:
            edi = 3
            ebx = 0
        elif counter == 8:
            edi = 4
            ebx = 1
        elif counter == 9:
            edi = 4
            ebx = 0
        elif counter == 10:
            edi = 5
            ebx = 1
        elif counter == 11:
            edi = 5
            ebx = 0
        elif counter == 12:
            edi = 6
            ebx = 1
        elif counter == 13:
            edi = 6
            ebx = 0
        elif counter == 14:
            edi = 7
            ebx = 1
        elif counter == 15:
            edi = 8
            ebx = 0
        for si in range(128):
            temp1 = si >> 1
            temp2 = 127 >> 1
            temp3 = temp1 + temp2

            if ebx == 1:
                temp3 -= 48
            elif ebx == 2:
                temp3 -= 80
            
            if temp3 < 0:                               
                continue
            if temp3 > 127:                
                continue
            
            edx = temp3 >> 2
            temp4 = edi * 32 + edx
            
            color = min(255, temp4)
            palette.append(color)
        palettes.append(palette)
    return palettes

import unittest

class TestColour(unittest.TestCase):
    def test_initPalettes(self):
        palettes = initMapPalettes()
        print(palettes)
        
